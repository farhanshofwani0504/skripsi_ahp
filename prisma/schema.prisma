generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Karyawan {
  id            Int             @id @default(autoincrement())
  nama          String
  posisi        String
  email         String?          // ⬅️ Pakai tanda tanya (?) supaya nullable
  penilaian     Penilaian[]
  warningLogs   WarningLog[]
}





model Penilaian {
  id         Int   @id @default(autoincrement())
  karyawanId Int
  kriteriaId Int
  nilai      Float

  karyawan Karyawan @relation(fields: [karyawanId], references: [id])
  kriteria Kriteria @relation(fields: [kriteriaId], references: [id])
}

model User {
  id       Int    @id @default(autoincrement())
  username String @unique
  email    String @unique
  password String
  role     String?
}


model Kriteria {
  id            Int             @id @default(autoincrement())
  nama          String
  penilaian     Penilaian[]
  bobotKriteria BobotKriteria[] // ⬅️ ini ditambahkan
}

model BobotKriteria {
  id         Int   @id @default(autoincrement())
  kriteriaId Int
  bobot      Float

  kriteria Kriteria @relation(fields: [kriteriaId], references: [id])
}

model WarningLog {
  id          Int      @id @default(autoincrement())
  karyawanId  Int
  email       String
  skor        Float
  tanggal     DateTime @default(now())

  karyawan    Karyawan @relation(fields: [karyawanId], references: [id])
}
